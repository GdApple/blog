---
layout: default
title: 在Windows上部署Jekyll
---

<p>来自<a href="http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html">http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html</a></p>

<p>Jekyll can also be made to run on Windows Operating System. This prefer when I am working on my office laptop which has Windows 7 installed on it.</p>

<p>Following packages are required to setup Jekyll on Windows:</p>

<ul>
	<li>Ruby &amp; Ruby Development Kit : Can be installed from&nbsp;<a href="http://rubyinstaller.org/downloads/">here</a></li>
	<li>Jekyll</li>
	<li>Python : I used the portable version available&nbsp;<a href="http://portablepython.com/wiki/PortablePython3.2.1.1">here</a></li>
	<li>Pygments</li>
</ul>

<p><strong>1</strong>&nbsp;Install the Ruby from&nbsp;<a href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a>&nbsp;and install it to path such as C:\ruby</p>

<p><strong>2</strong>&nbsp;Install the Ruby development kit from&nbsp;<a href="http://rubyforge.org/frs/download.php/75127/rubyinstaller-1.9.2-p290.exe">here</a>&nbsp;and extract it to path such as c:\devkit. Run the following commands</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>ruby dk.rb init
</code></pre>
</div>

<p>to generate the config.yml file to be used later in this Step</p>

<p><strong>3</strong>&nbsp;Edit the generated config.yml file to include installed Rubies. For example, in our case, it will look like this</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code># This configuration file contains the absolute path locations of all
# installed Rubies to be enhanced to work with the DevKit. This config
# file is generated by the &#39;ruby dk.rb init&#39; step and may be modified
# before running the &#39;ruby dk.rb install&#39; step. To include any installed
# Rubies that were not automagically discovered, simply add a line below
# the triple hyphens with the absolute path to the Ruby root directory.
#
# Example:
#
# ---
# - C:/ruby19trunk
# - C:/ruby192dev
#
---
- C:/ruby
</code></pre>
</div>

<p><strong>4</strong>&nbsp;Run the following command to install to DevKit enhance your installed Rubies. This step installs (or updates) an operating_system.rb file into the relevant directory needed to implement a RubyGems</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>ruby dk.rb install
</code></pre>
</div>

<p><strong>5</strong>&nbsp;Install Jekyll using following command</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>gem install jekyll
</code></pre>
</div>

<p><strong>6</strong>&nbsp;Now, you can start using Jekyll. If you require code highlighting using pygments as well, follow the additional steps as well. Install Portable Python from&nbsp;<a href="http://portablepython.com/wiki/PortablePython3.2.1.1">here</a></p>

<p><strong>7</strong>&nbsp;Now we need to install, easy_install. For python versions &gt; 3, this can be installed from<a href="http://pypi.python.org/pypi/distribute">http://pypi.python.org/pypi/distribute</a>&nbsp;Download distribute_setup.py and run the following command in python</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>python distribute_setup.py
</code></pre>
</div>

<p><strong>8</strong>&nbsp;Now to install pygments, simply run this command:</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>easy_install Pygments	
</code></pre>
</div>

<p><strong>9</strong>&nbsp;Note that if you are using Python &gt; 3 as discussed in this blog, you are likely to hit the following error when running Pygmentize</p>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>Liquid error: Bad file descriptor
</code></pre>
</div>

<div class="highlight" style="margin: 0px 0px 1em; padding: 0.2em 0.9em; border: 1px solid rgb(204, 204, 204); font-size: 15px; vertical-align: baseline; background-color: rgb(17, 17, 17); color: rgb(248, 248, 242); overflow: auto; border-top-left-radius: 7px; border-top-right-radius: 7px; border-bottom-right-radius: 7px; border-bottom-left-radius: 7px; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace !important;">
<pre>
<code>TypeError: Can&#39;t convert &#39;bytes&#39; object to str implicitly
</code></pre>
</div>

<p>These are known issues and the resolution has been discussed here: https://github.com/rtomayko/posix-spawn/issues/17</p>

<p>This requires a change in C:\ruby\lib\ruby\gems\1.9.1\gems\albino-1.3.3\lib\albino.rb file.</p>

<p>I have created the gist of the changes required&nbsp;<a href="https://gist.github.com/1185645">here</a></p>
