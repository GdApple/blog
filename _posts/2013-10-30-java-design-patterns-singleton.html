---
layout: post
title: 单例模式 - 美国只有一个总统
description: 单例模式在Java中最常用的模式之一。它能阻止外部的实例化和修改，从而控制创建的对象的数量。这个概念可以应用到只允许一个对象存在时的操作，或者限制在一定数量的对象的操作
tags: [设计模式, 翻译, 单例]
---

翻译自 
<a href="http://www.programcreek.com/2011/07/java-design-pattern-singleton/" rel="bookmark">Java Design Pattern: Singleton</a>

<p>单例模式在Java中最常用的模式之一。它能阻止外部的实例化和修改，从而控制创建的对象的数量。这个概念可以应用到只允许一个对象存在时的操作，或者限制在一定数量的对象的操作，如：</p><ol><li>私有构造函数 - 没有其他类可以实例化一个新的对象。</li><li>私有引用 - 没有外部修改。</li><li>公共静态方法是唯一可以得到对象引用的地方。</li></ol><p><strong>单例模式的故事</strong></p><p>下面是一个简单的使用情况。一个国家只能有一个总统（这是正常的情况）。所以每当我们要引用总统对象，只需要通过AmericaPresident返回，其中的getPresident（）方法将确保始终只有一个总统创建。否则，它就不会符合正常情况。</p><p><strong>类图</strong></p><p><a href="http://www.programcreek.com/wp-content/uploads/2011/07/singleton.jpg"><img src="Evernote.enex_files/Image.jpg" type="image/jpeg" alt="$singleton" height="117" style="cursor: default;" width="264"/></a></p><p><strong>Java 代码</strong></p><div style="color: rgb(17, 0, 0); background-color: rgb(249, 249, 249); border: 1px solid rgb(209, 209, 232); margin: 0px 1em 1.5em 0px; overflow-y: hidden; overflow-x: auto; padding: 10px; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; line-height: 1.5; width: 1210.546875px;"><table style="border: none !important; border-collapse: collapse !important; margin: 0px !important; padding: 0px !important; width: 1210px;"><tbody><tr><td style="border: none !important; text-align: left !important; padding: 0px !important; vertical-align: top !important; background-image: none;"><pre style="background-color: transparent !important; border: none !important; margin-top: 0px !important; margin-bottom: 0px !important; width: auto !important; float: none !important; clear: none !important; overflow: visible !important; font-size: 13px !important; line-height: 16px !important; padding: 0px 4px !important; -webkit-box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px !important; box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important;"><span style="font-weight: bold;">package</span> <span style="color: rgb(0, 102, 153);">com.programcreek.designpatterns.singleton</span><span style="color: rgb(51, 153, 51);">;</span>
 
<span style="font-weight: bold;">public</span> <span style="font-weight: bold;">class</span> AmericaPresident <span style="color: rgb(0, 153, 0);">{</span>
        <span style="font-weight: bold;">private</span> AmericaPresident<span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span> <span style="color: rgb(0, 153, 0);">{</span>   <span style="color: rgb(0, 153, 0);">}</span>
 
        <span style="font-weight: bold;">private</span> <span style="font-weight: bold;">static</span> AmericaPresident thePresident<span style="color: rgb(51, 153, 51);">;</span>
 
        <span style="font-weight: bold;">public</span> <span style="font-weight: bold;">static</span> AmericaPresident getPresident<span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(0, 153, 0);">{</span>
                <span style="font-weight: bold;">if</span><span style="color: rgb(0, 153, 0);">(</span>thePresident <span style="color: rgb(51, 153, 51);">==</span> <span style="color: rgb(0, 0, 102); font-weight: bold;">null</span><span style="color: rgb(0, 153, 0);">)</span>
                        thePresident <span style="color: rgb(51, 153, 51);">=</span> <span style="font-weight: bold;">new</span> AmericaPresident<span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(51, 153, 51);">;</span>
                <span style="font-weight: bold;">return</span> thePresident<span style="color: rgb(51, 153, 51);">;</span>
        <span style="color: rgb(0, 153, 0);">}</span><span style="color: rgb(0, 153, 0);">}</span></pre></td></tr></tbody></table></div><p><strong>单例模式在Java标准类库中的使用</strong></p><p><code>java.lang.Runtime#getRuntime()</code>是Java标准库中的一种常用方法。 <code>getRunTime()</code>返回与当前Java应用程序的运行时对象。</p><p>下面是一个简单的使用<code>getRunTime()</code>的例子，在Windows系统上读取网页。</p><div style="color: rgb(17, 0, 0); background-color: rgb(249, 249, 249); border: 1px solid rgb(209, 209, 232); margin: 0px 1em 1.5em 0px; overflow-y: hidden; overflow-x: auto; padding: 10px; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; line-height: 1.5; width: 1210.546875px;"><table style="border: none !important; border-collapse: collapse !important; margin: 0px !important; padding: 0px !important; width: 1210px;"><tbody><tr><td style="border: none !important; text-align: left !important; padding: 0px !important; vertical-align: top !important; background-image: none;"><pre style="background-color: transparent !important; border: none !important; margin-top: 0px !important; margin-bottom: 0px !important; width: auto !important; float: none !important; clear: none !important; overflow: visible !important; font-size: 13px !important; line-height: 16px !important; padding: 0px 4px !important; -webkit-box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px !important; box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important;"><span style="color: rgb(0, 51, 153);">Process</span> p <span style="color: rgb(51, 153, 51);">=</span> <span style="color: rgb(0, 51, 153);">Runtime</span>.<span style="color: rgb(0, 102, 51);">getRuntime</span><span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span>.<span style="color: rgb(0, 102, 51);">exec</span><span style="color: rgb(0, 153, 0);">(</span>
                <span style="color: rgb(0, 0, 255);">&quot;C:/windows/system32/ping.exe programcreek.com&quot;</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(51, 153, 51);">;</span><span style="color: rgb(102, 102, 102); font-style: italic;">/ /获取进程的输入流，并把它给BufferedReader</span><span style="color: rgb(0, 51, 153);">BufferedReader</span> input <span style="color: rgb(51, 153, 51);">=</span> <span style="font-weight: bold;">new</span> <span style="color: rgb(0, 51, 153);">BufferedReader</span><span style="color: rgb(0, 153, 0);">(</span><span style="font-weight: bold;">new</span> <span style="color: rgb(0, 51, 153);">InputStreamReader</span><span style="color: rgb(0, 153, 0);">(</span>
                p.<span style="color: rgb(0, 102, 51);">getInputStream</span><span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(51, 153, 51);">;</span>
 
<span style="color: rgb(0, 51, 153);">String</span> line<span style="color: rgb(51, 153, 51);">;</span><span style="font-weight: bold;">while</span> <span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">(</span>line <span style="color: rgb(51, 153, 51);">=</span> input.<span style="color: rgb(0, 102, 51);">readLine</span><span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(0, 153, 0);">)</span> <span style="color: rgb(51, 153, 51);">!</span>= null) { 
        <span style="color: rgb(0, 51, 153);">System</span>.<span style="color: rgb(0, 102, 51);">out</span>.<span style="color: rgb(0, 102, 51);">println</span><span style="color: rgb(0, 153, 0);">(</span>line<span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(51, 153, 51);">;</span><span style="color: rgb(0, 153, 0);">}</span>
 
input.<span style="color: rgb(0, 102, 51);">close</span><span style="color: rgb(0, 153, 0);">(</span><span style="color: rgb(0, 153, 0);">)</span><span style="color: rgb(51, 153, 51);">;</span></pre></td></tr></tbody></table></div><p>输出：</p><div>Pinging programcreek.com [198.71.49.96] with 32 bytes of data:<br>
Reply from 198.71.49.96: bytes=32 time=53ms TTL=47<br>
Reply from 198.71.49.96: bytes=32 time=53ms TTL=47<br>
Reply from 198.71.49.96: bytes=32 time=52ms TTL=47<br>
Reply from 198.71.49.96: bytes=32 time=53ms TTL=47
<p>Ping statistics for 198.71.49.96:<br>
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),<br>
Approximate round trip times in milli-seconds:<br>
Minimum = 52ms, Maximum = 53ms, Average = 52ms</p>